# 随机审判选项生成 - 开发文档

## 功能概述

根据关键词自动生成审判选项内容，为用户提供灵感创意或快速测试插件功能。

---

## 需求分析

### 用户场景

- **灵感不足**：用户想生成审判表情包但缺乏创意
- **快速测试**：测试插件功能，无需手动输入
- **社交互动**：群聊中随机生成有趣的话题
- **模板参考**：提供选项格式参考

### 功能需求

1. 支持根据关键词生成相关选项
2. 支持无关键词随机生成
3. 生成的选项符合游戏风格
4. 包含不同类型的陈述（疑问、反驳、赞同等）
5. 生成的选项数量可配置

### 非功能需求

- 多样性：相同关键词生成不同结果
- 合理性：生成的选项符合逻辑
- 娱乐性：选项内容有趣味性

---

## 设计方案

### 模板系统

使用预设模板 + 关键词替换的方式生成选项。为每种陈述类型（疑问、反驳、赞同、伪证）准备多个模板，每个模板包含关键词占位符。

### 关键词库

内置一些常用关键词列表，当用户不提供关键词时，从中随机选择。

---

## 实现步骤

### 步骤1：添加常量

在常量文件中添加随机审判配置常量，定义默认生成选项数量和最大生成数量限制。

### 步骤2：添加模板数据

在插件类中添加预设模板字典，包含各种陈述类型的模板列表。

### 步骤3：实现命令处理器

创建命令处理器方法，实现以下逻辑：

1. 解析消息内容，提取关键词和数量参数
2. 验证数量参数（在1到最大值之间）
3. 如果没有关键词，从关键词库中随机选择
4. 调用选项生成方法
5. 格式化输出结果，包含主题和选项列表
6. 提示用户可以直接复制使用

### 步骤4：实现选项生成方法

创建辅助方法，实现以下逻辑：

1. 随机选择陈述类型
2. 从对应类型的模板列表中随机选择模板
3. 用关键词替换模板中的占位符
4. 格式化为选项字符串
5. 重复指定次数

---

## 测试方案

| 测试用例   | 输入         | 预期结果    |
|--------|------------|---------|
| 带关键词生成 | 随机审判 校园生活  | 生成3个选项  |
| 指定数量   | 随机审判 美食 4  | 生成4个选项  |
| 无关键词   | 随机审判       | 随机选择关键词 |
| 数量超限   | 随机审判 测试 10 | 提示数量超限  |

---

## 注意事项

- 模板应该足够多样，避免重复
- 生成的选项应该符合逻辑
- 适当加入幽默元素
- 魔法选项应该有一定概率出现
- 选项格式应与手动输入一致，可直接使用

---

## 扩展思路

1. 支持更多陈述类型
2. 支持自定义模板
3. 支持主题分类
4. 支持选项过滤
5. 接入AI生成更自然的选项

---

## 许可证

本项目遵循 AGPL-3.0 许可证条款。